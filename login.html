<!-- Login Form -->
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Login</title>
  </head>

  <body>
    <form id="login-form">
      <h2>Login</h2>
      <label for="email">Email:</label>
      <input type="email" id="email" required /><br />
      <label for="password">Password:</label>
      <input type="password" id="password" required /><br />
      <button type="submit">Sign in</button>
    </form>

    <script type="module">
      // Import the necessary Firebase modules
      import { initializeApp } from "https://www.gstatic.com/firebasejs/10.0.0/firebase-app.js";
      import {
        getAuth,
        signInWithEmailAndPassword,
      } from "https://www.gstatic.com/firebasejs/10.0.0/firebase-auth.js";

      const firebaseConfig = {
        apiKey: "AIzaSyDoopnPXcNbdwxDKpIT9AB6wA-D8rX_bRE",
        authDomain: "celibrary-3d96f.firebaseapp.com",
        projectId: "celibrary-3d96f",
        storageBucket: "celibrary-3d96f.appspot.com",
        messagingSenderId: "214869933074",
        appId: "1:214869933074:web:f857b20f5d36a53a2faccb",
        measurementId: "G-BHC3LTYS0C",
      };
      // Initialize Firebase
      const app = initializeApp(firebaseConfig);
      const auth = getAuth(app);

      const loginForm = document.querySelector("#login-form");
      loginForm.addEventListener("submit", (e) => {
        e.preventDefault();
        const email = loginForm.email.value;
        const password = loginForm.password.value;

        signInWithEmailAndPassword(auth, email, password)
          .then((userCredential) => {
            // Signed in
            const user = userCredential.user;
            // Redirect to home page after successful login
            window.location.href = "index.html";
            // Display welcome message on index.html
            const welcomeMessage = document.querySelector(".welcome-message");
            welcomeMessage.textContent = `Hi, ${user.email}! Welcome to CeLibrary!`;
          })
          .catch((error) => {
            const errorCode = error.code;
            const errorMessage = error.message;
            // Handle login error (e.g., display an error message)
            console.error(errorCode, errorMessage);
          });
      });
    </script>
  </body>
</html>
