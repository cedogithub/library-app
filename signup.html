<!DOCTYPE html>
<html>
  <head>
    <title>Sign Up</title>
  </head>
  <body>
    <h1>Sign Up</h1>
    <form id="signup-form">
      <label for="email">Email:</label>
      <input type="email" id="email" required /><br />
      <label for="password">Password:</label>
      <input type="password" id="password" required /><br />
      <button type="submit">Sign Up</button>
    </form>
    <script type="module">
      import { initializeApp } from "https://www.gstatic.com/firebasejs/10.0.0/firebase-app.js";
      import { getAnalytics } from "https://www.gstatic.com/firebasejs/10.0.0/firebase-analytics.js";
      import {
        getAuth,
        createUserWithEmailAndPassword,
      } from "https://www.gstatic.com/firebasejs/10.0.0/firebase-auth.js";
      // https://firebase.google.com/docs/web/setup#available-libraries

      const firebaseConfig = {
        apiKey: "AIzaSyDoopnPXcNbdwxDKpIT9AB6wA-D8rX_bRE",
        authDomain: "celibrary-3d96f.firebaseapp.com",
        projectId: "celibrary-3d96f",
        storageBucket: "celibrary-3d96f.appspot.com",
        messagingSenderId: "214869933074",
        appId: "1:214869933074:web:f857b20f5d36a53a2faccb",
        measurementId: "G-BHC3LTYS0C",
      };

      // Initialize Firebase
      const app = initializeApp(firebaseConfig);
      const analytics = getAnalytics(app);
      const auth = getAuth(app);
      const signUpForm = document.querySelector("#signup-form");
      signUpForm.addEventListener("submit", (e) => {
        e.preventDefault();
        const email = signUpForm.email.value;
        const password = signUpForm.password.value;

        createUserWithEmailAndPassword(auth, email, password)
          .then((userCredential) => {
            // Signed in
            const user = userCredential.user;
            // Redirect to home page after successful signup
            window.location.href = "index.html";
            // Display welcome message on index.html
            const welcomeMessage = document.querySelector(".welcome-message");
            welcomeMessage.textContent = `Hi, ${user.email}! Welcome to CeLibrary!`;
          })
          .catch((error) => {
            const errorCode = error.code;
            const errorMessage = error.message;
            // Handle signup error (e.g., display an error message)
            console.error(errorCode, errorMessage);
          });
      });
    </script>
  </body>
</html>
